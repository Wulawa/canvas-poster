{"version":3,"sources":["src/util.js","src/imageManager.js","src/textManager.js","src/index.js","index.js"],"names":["xhr","url","window","XMLHttpRequest","Promise","resolve","reject","xmlhttp","open","responseType","withCredentials","onload","status","response","send","e","console","error","blobtoImg","blob","img","Image","src","URL","createObjectURL","onerror","loader","urls","all","map","item","imgs","imageManager","ImageCircle","options","square","canvas","document","createElement","ctx","getContext","width","height","w","h","clpWidth","clpHeight","clpX","clpY","ww","hh","min","Math","circle","x","y","r","arc","PI","clip","drawImage","ImageClip","padding","textManager","Text","text","String","devicePixelRatio","maxWidth","fontSize","fontFamily","fontWeight","lineHeight","textAlign","fillStyle","maxLines","lastLineCenter","font","draw","sc","baseLine","info","measureText","j","length","i","fillText","maxHeight","words","res","len","line","lastLine","start","isLast","substr","push","canvasImg","image","loadByUrl","bgBlob","bgImg","drawBackground","clearRect","radius","bg","beginPath","lineTo","closePath","fill","centerx","centery","xx","yy","textOptions","imgOptions","t","getCanvas","addImg","qrurl","btoa","loadImgByUrl","avatar","qrcode","setBackground","avatarConfig","avatarConfigImg","nameConfig","nameConfigImg","addText","titleConfig","titleConfigImg","timeConfig","timeConfigImg","intro","introConfig","introConfigImg","body","appendChild","getImg","img1","img2","img3"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"canvas-tool.d66793b4.map","sourceRoot":"..","sourcesContent":["export default {\n\txhr(url) {\n\t\tconst xhr = window.XMLHttpRequest;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (xhr) {\n\t\t\t\ttry {\n\t\t\t\t\tconst xmlhttp = new xhr();\n\t\t\t\t\txmlhttp.open('GET', url, true);\n\t\t\t\t\txmlhttp.responseType = 'blob';\n\t\t\t\t\txmlhttp.withCredentials = false;\n\t\t\t\t\txmlhttp.onload = () => {\n\t\t\t\t\t\tif (xmlhttp.status == 200) {\n\t\t\t\t\t\t\tresolve(xmlhttp.response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(xmlhttp);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\txmlhttp.send(null);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treject('no xhr');\n\t\t\t}\n\t\t});\n\t},\n\tblobtoImg(blob) {\n\t\tconst img = new Image();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\timg.src = window.URL.createObjectURL(blob);\n\t\t\timg.onload = () => {\n\t\t\t\tresolve(img);\n\t\t\t};\n\t\t\timg.onerror = e => {\n\t\t\t\treject(e);\n\t\t\t};\n\t\t});\n\t},\n\tasync loader(urls, img) {\n\t\tconst imgs = await Promise.all(\n\t\t\turls.map(item => {\n\t\t\t\treturn this.xhr(item);\n\t\t\t})\n\t\t);\n\t\tif (img) {\n\t\t\treturn await Promise.all(\n\t\t\t\timgs.map(item => {\n\t\t\t\t\treturn this.blobtoImg(item);\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\treturn imgs;\n\t}\n};\n","import util from './util.js';\nexport default class imageManager {\n\tconstructor() {}\n\tloadByUrl(imgs, img) {\n\t\treturn util.loader(imgs, img);\n\t}\n}\n\nexport class ImageCircle {\n\tconstructor(img, options = { square: true }) {\n\t\tthis.canvas = document.createElement('canvas');\n\t\tconst ctx = this.canvas.getContext('2d');\n\t\tconst { width, height } = img;\n\t\tconst { w, h, square } = options;\n\n\t\tlet clpWidth, clpHeight, clpX, clpY, ww, hh;\n\n\t\tif (square) {\n\t\t\tconst min = Math.min(width, height);\n\t\t\tww = w ? w : min;\n\t\t\thh = h ? h : min;\n\t\t\tthis.canvas.width = min;\n\t\t\tthis.canvas.height = min;\n\t\t\tclpWidth = min;\n\t\t\tclpHeight = min;\n\t\t\tclpX = (width - min) / 2;\n\t\t\tclpY = (height - min) / 2;\n\t\t} else {\n\t\t\tww = w ? w : width;\n\t\t\thh = h ? h : height;\n\n\t\t\tthis.canvas.width = ww;\n\t\t\tthis.canvas.height = hh;\n\t\t\tclpWidth = width;\n\t\t\tclpHeight = height;\n\t\t\tclpX = 0;\n\t\t\tclpY = 0;\n\t\t}\n\t\tconst circle = {\n\t\t\tx: ww / 2,\n\t\t\ty: hh / 2,\n\t\t\tr: Math.min(ww, hh) / 2\n\t\t};\n\t\tctx.arc(circle.x, circle.y, circle.r, 0, Math.PI * 2, false);\n\t\tctx.clip();\n\t\tctx.drawImage(img, clpX, clpY, clpWidth, clpHeight, 0, 0, ww, hh);\n\t}\n\n\tgetCanvas() {\n\t\treturn this.canvas;\n\t}\n}\n\nexport class ImageClip {\n\tconstructor(img, options = {}) {\n\t\tthis.canvas = document.createElement('canvas');\n\t\tconst ctx = this.canvas.getContext('2d');\n\t\tconst { width, height } = img;\n\t\tconst { padding } = options;\n\t\tthis.canvas.width = width - 2 * padding;\n\t\tthis.canvas.height = height - 2 * padding;\n\t\tctx.drawImage(\n\t\t\timg,\n\t\t\tpadding,\n\t\t\tpadding,\n\t\t\tthis.canvas.width,\n\t\t\tthis.canvas.height,\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.canvas.width,\n\t\t\tthis.canvas.height\n\t\t);\n\t}\n\n\tgetCanvas() {\n\t\treturn this.canvas;\n\t}\n}\n","export default class textManager {\n\tconstructor() {}\n}\n\nexport class Text {\n\tconstructor(text, options) {\n\t\tthis.text = String(text);\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.ctx = this.canvas.getContext('2d');\n\t\tconst {\n\t\t\tdevicePixelRatio,\n\t\t\tmaxWidth,\n\t\t\tfontSize,\n\t\t\tfontFamily,\n\t\t\tfontWeight,\n\t\t\tlineHeight,\n\t\t\ttextAlign,\n\t\t\tfillStyle,\n\t\t\tmaxLines,\n\t\t\tlastLineCenter\n\t\t} = options;\n\n\t\tthis.lastLineCenter = lastLineCenter;\n\t\tthis.devicePixelRatio = devicePixelRatio || 1;\n\t\tthis.maxLines = maxLines || 6;\n\t\tthis.maxWidth = maxWidth || 100;\n\t\tthis.maxWidth = this.devicePixelRatio * this.maxWidth;\n\n\t\tthis.canvas.width = this.maxWidth;\n\t\tthis.canvas.height = 10 * this.canvas.width;\n\n\t\tthis.lineHeight = lineHeight || 1.2;\n\n\t\tif (fontSize && fontFamily && fontWeight) {\n\t\t\tthis.fontSize = fontSize;\n\n\t\t\tif (devicePixelRatio > 2) {\n\t\t\t\tthis.fontSize *= devicePixelRatio / 2;\n\t\t\t}\n\t\t\tthis.ctx.font = `${fontWeight} ${this.fontSize}px ${fontFamily}`;\n\t\t} else {\n\t\t\tconsole.error('params error');\n\t\t}\n\t\tif (fillStyle) {\n\t\t\tthis.ctx.fillStyle = fillStyle;\n\t\t}\n\t\tif (textAlign) {\n\t\t\tthis.ctx.textAlign = textAlign;\n\t\t}\n\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tlet sc = 1;\n\t\tif (this.devicePixelRatio > 2) {\n\t\t\tsc = 2 / this.devicePixelRatio;\n\t\t}\n\t\tconst baseLine = 0.85 * this.fontSize;\n\t\tlet x = 0,\n\t\t\ty = baseLine;\n\t\tconst lineHeight = this.lineHeight * this.fontSize * sc;\n\t\tconst info = this.measureText();\n\t\tconst j = info.length;\n\t\tfor (let i = 0; i < j; i++) {\n\t\t\tconst item = info[i];\n\t\t\tif (this.lastLineCenter && i == j - 1) {\n\t\t\t\tconst w = this.ctx.measureText(item).width;\n\t\t\t\tx = this.maxWidth / 2 - w / 2;\n\t\t\t\tthis.ctx.fillText(item, x, y + i * lineHeight, this.maxWidth);\n\t\t\t} else {\n\t\t\t\tthis.ctx.fillText(item, x, y + i * lineHeight, this.maxWidth);\n\t\t\t}\n\t\t}\n\t\tthis.maxHeight = j * lineHeight + y;\n\t\tif (j == 1) {\n\t\t\tthis.maxWidth = this.ctx.measureText(this.text).width;\n\t\t}\n\t}\n\n\tmeasureText() {\n\t\t// TODO 二分查找\n\t\tconst words = this.text;\n\t\tconst maxWidth = this.maxWidth;\n\t\tconst maxLines = this.maxLines - 1;\n\t\tconst ctx = this.ctx;\n\t\tconst res = [];\n\t\tconst len = words.length;\n\t\tlet line = '',\n\t\t\tlastLine = '',\n\t\t\tstart = 0,\n\t\t\tisLast = false,\n\t\t\ti = 1;\n\n\t\twhile (true) {\n\t\t\tline = words.substr(start, i);\n\t\t\tif (start + i > len) {\n\t\t\t\tres.push(line);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (ctx.measureText(line).width > maxWidth) {\n\t\t\t\tstart += i - 1;\n\t\t\t\tif (isLast || maxLines === 0) {\n\t\t\t\t\tres.push(lastLine.substr(0, lastLine.length - 3) + '...');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tres.push(lastLine);\n\t\t\t\tif (res.length == maxLines) {\n\t\t\t\t\tisLast = true;\n\t\t\t\t}\n\t\t\t\ti = 1;\n\t\t\t} else {\n\t\t\t\tlastLine = line;\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetCanvas() {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = this.maxWidth;\n\t\tcanvas.height = this.maxHeight;\n\t\tconst ctx = canvas.getContext('2d');\n\t\tctx.drawImage(\n\t\t\tthis.canvas,\n\t\t\t0,\n\t\t\t0,\n\t\t\tcanvas.width,\n\t\t\tcanvas.height,\n\t\t\t0,\n\t\t\t0,\n\t\t\tcanvas.width,\n\t\t\tcanvas.height\n\t\t);\n\t\treturn canvas;\n\t}\n}\n","import imageManager, { ImageCircle, ImageClip } from './imageManager.js';\nimport textManager, { Text } from './textManager.js';\n\nclass canvasImg {\n\tconstructor(width, height) {\n\t\tthis.image = new imageManager();\n\t\tthis.text = new textManager();\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height = height;\n\t\tthis.ctx = this.canvas.getContext('2d');\n\t}\n\tasync loadImgByUrl(imgs, img) {\n\t\treturn this.image.loadByUrl(imgs, img);\n\t}\n\tsetBackground(bgBlob) {\n\t\tthis.bgImg = bgBlob;\n\t\tthis.drawBackground();\n\t}\n\tdrawBackground() {\n\t\tthis.ctx.clearRect(0, 0, this.width, this.height);\n\t\tif (this.bgImg) {\n\t\t\tthis.ctx.drawImage(\n\t\t\t\tthis.bgImg,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tthis.width,\n\t\t\t\tthis.height,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tthis.width,\n\t\t\t\tthis.height\n\t\t\t);\n\t\t}\n\t}\n\tdrawRoundRect(x, y, width, height, radius, bg) {\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(\n\t\t\tx + radius,\n\t\t\ty + radius,\n\t\t\tradius,\n\t\t\tMath.PI,\n\t\t\t(Math.PI * 3) / 2\n\t\t);\n\t\tthis.ctx.lineTo(width - radius + x, y);\n\t\tthis.ctx.arc(\n\t\t\twidth - radius + x,\n\t\t\tradius + y,\n\t\t\tradius,\n\t\t\t(Math.PI * 3) / 2,\n\t\t\tMath.PI * 2\n\t\t);\n\t\tthis.ctx.lineTo(width + x, height + y - radius);\n\t\tthis.ctx.arc(\n\t\t\twidth - radius + x,\n\t\t\theight - radius + y,\n\t\t\tradius,\n\t\t\t0,\n\t\t\t(Math.PI * 1) / 2\n\t\t);\n\t\tthis.ctx.lineTo(radius + x, height + y);\n\t\tthis.ctx.arc(\n\t\t\tradius + x,\n\t\t\theight - radius + y,\n\t\t\tradius,\n\t\t\t(Math.PI * 1) / 2,\n\t\t\tMath.PI\n\t\t);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fillStyle = bg || '#fff';\n\t\tthis.ctx.fill();\n\t}\n\taddImg(canvas, options) {\n\t\tconst { width, height } = canvas;\n\t\tconst { x, y, w, h, centerx, centery } = options;\n\n\t\tconst ww = w ? w : width;\n\t\tconst hh = h ? h : height;\n\t\tlet xx = x;\n\t\tlet yy = y;\n\n\t\tif (centerx) {\n\t\t\txx = this.width / 2 - ww / 2;\n\t\t}\n\t\tif (centery) {\n\t\t\tyy = this.height / 2 - hh / 2;\n\t\t}\n\n\t\tthis.ctx.drawImage(canvas, xx, yy, ww, hh);\n\t}\n\taddText(text, textOptions, imgOptions) {\n\t\tconst t = new Text(text, textOptions);\n\t\tconst img = t.getCanvas();\n\t\tthis.addImg(img, imgOptions);\n\t\treturn t;\n\t}\n\tgetImg() {\n\t\treturn this.canvas;\n\t}\n}\nexport default canvasImg;\nexport { ImageCircle, ImageClip };\n","import canvasImg, { ImageCircle, ImageClip } from './src';\n\nasync function img1() {\n\tconst canvas = new canvasImg(750, 1334);\n\tconst qrurl = `http://qrcode.ourwill.cn/png/${btoa('http://live.tuwenzhibo.com')}.png?s=6`;\n\tconst imgs = ['http://cdn.ourwill.cn/static/images/invite1.jpg', 'http://cdn.ourwill.cn/static/images/123.png', qrurl];\n\tconst [bg, avatar, qrcode] = await canvas.loadImgByUrl(imgs, true);\n\tcanvas.setBackground(bg);\n\tconst avatarConfig = {\n\t\tsquare: true\n\t};\n\tconst avatarConfigImg = {\n\t\tx: 110,\n\t\ty: 119,\n\t\tw: 134,\n\t\th: 134\n\t};\n\tcanvas.addImg(new ImageCircle(avatar, avatarConfig).getCanvas(), avatarConfig);\n\tconst nameConfig = {\n\t\tmaxWidth: 400,\n\t\tfontSize: 32,\n\t\tmaxLines: 1,\n\t\tfontWeight: '400',\n\t\tfillStyle: '#111',\n\t\tfontFamily: 'sans-serif'\n\t};\n\tconst nameConfigImg = {\n\t\tx: 109,\n\t\ty: 285\n\t};\n\tcanvas.addText('Sucong Hou', nameConfig, nameConfigImg);\n\n\tconst titleConfig = {\n\t\tmaxWidth: 550,\n\t\tfontSize: 32,\n\t\tlineHeight: 2,\n\t\tfontWeight: '500',\n\t\tfillStyle: '#111',\n\t\tfontFamily: 'sans-serif',\n\t\tmaxLines: 2\n\t};\n\tconst titleConfigImg = {\n\t\tx: 110,\n\t\ty: 478\n\t};\n\tcanvas.addText('#遇见生活#生活方式面面观——大咖采访会', titleConfig, titleConfigImg);\n\n\tconst timeConfig = {\n\t\tmaxWidth: 550,\n\t\tfontSize: 26,\n\t\tmaxLines: 1,\n\t\tfontWeight: '300',\n\t\tfillStyle: '#888',\n\t\tfontFamily: 'sans-serif'\n\t};\n\tconst timeConfigImg = {\n\t\tx: 109,\n\t\ty: 624\n\t};\n\tcanvas.addText('18/06/26 14:30', timeConfig, timeConfigImg);\n\n\tcanvas.addImg(new ImageClip(qrcode, { padding: 24 }).getCanvas(), {\n\t\tx: 110,\n\t\ty: 693,\n\t\tw: 181,\n\t\th: 181\n\t});\n\n\tconst intro =\n\t\t'2018北京国际家具展暨智能生活节于6月14-17日在北京·中国国际展览中心（新馆）盛大召开。《今日家具》中文版直播间将以“生活方式面面观”为主题，邀请多位家具行业大咖，共同探讨有关生活方式的诸多话题。';\n\tconst introConfig = {\n\t\tmaxWidth: 540,\n\t\tfontSize: 24,\n\t\tlineHeight: 2,\n\t\tfontWeight: '300',\n\t\tfillStyle: '#888',\n\t\tfontFamily: 'sans-serif'\n\t};\n\tconst introConfigImg = {\n\t\tcenterx: true,\n\t\ty: 968\n\t};\n\tcanvas.addText(intro, introConfig, introConfigImg);\n\n\tdocument.body.appendChild(canvas.getImg());\n}\n\nasync function img2() {\n\tconst canvas = new canvasImg(750, 1334);\n\tconst qrurl = `http://qrcode.ourwill.cn/png/${btoa('http://live.tuwenzhibo.com')}.png?s=6`;\n\tconst imgs = ['http://cdn.ourwill.cn/static/images/invite2.jpg', 'http://cdn.ourwill.cn/static/images/123.png', qrurl];\n\tconst [bg, avatar, qrcode] = await canvas.loadImgByUrl(imgs, true);\n\tcanvas.setBackground(bg);\n\tconst avatarConfig = {\n\t\tsquare: true\n\t};\n\tconst avatarConfigImg = {\n\t\tcenterx: true,\n\t\ty: 140,\n\t\tw: 134,\n\t\th: 134\n\t};\n\tcanvas.addImg(new ImageCircle(avatar, avatarConfig).getCanvas(), avatarConfigImg);\n\tconst nameConfig = {\n\t\tmaxWidth: 400,\n\t\tfontSize: 32,\n\t\tmaxLines: 1,\n\t\tfontWeight: '400',\n\t\tfillStyle: '#111',\n\t\tfontFamily: 'sans-serif'\n\t};\n\tconst nameConfigImg = {\n\t\tcenterx: true,\n\t\ty: 305\n\t};\n\tcanvas.addText('Sucong Hou', nameConfig, nameConfigImg);\n\n\tconst titleConfig = {\n\t\tmaxWidth: 516,\n\t\tfontSize: 32,\n\t\tlineHeight: 1.8,\n\t\tfontWeight: '500',\n\t\tfillStyle: '#111',\n\t\tfontFamily: 'sans-serif',\n\t\tmaxLines: 2,\n\t\tlastLineCenter: true\n\t};\n\tconst titleConfigImg = {\n\t\tx: 116,\n\t\ty: 499\n\t};\n\tcanvas.addText('#遇见生活#生活方式面面观——大咖采访会', titleConfig, titleConfigImg);\n\n\tconst timeConfig = {\n\t\tmaxWidth: 200,\n\t\tfontSize: 26,\n\t\tmaxLines: 1,\n\t\tfontWeight: '300',\n\t\tfillStyle: '#888',\n\t\tfontFamily: 'sans-serif'\n\t};\n\tconst timeConfigImg = {\n\t\tcenterx: true,\n\t\ty: 645\n\t};\n\tcanvas.addText('18/06/26 14:30', timeConfig, timeConfigImg);\n\n\tcanvas.addImg(new ImageClip(qrcode, { padding: 24 }).getCanvas(), {\n\t\tcenterx: true,\n\t\ty: 714,\n\t\tw: 181,\n\t\th: 181\n\t});\n\n\tconst intro =\n\t\t'2018北京国际家具展暨智能生活节于6月14-17日在北京·中国国际展览中心（新馆）盛大召开。《今日家具》中文版直播间将以“生活方式面面观”为主题，邀请多位家具行业大咖，共同探讨有关生活方式的诸多话题。';\n\tconst introConfig = {\n\t\tmaxWidth: 539,\n\t\tfontSize: 24,\n\t\tlineHeight: 2,\n\t\tfontWeight: '300',\n\t\tfillStyle: '#888',\n\t\tfontFamily: 'sans-serif',\n\t\tlastLineCenter: true\n\t};\n\tconst introConfigImg = {\n\t\tx: 108,\n\t\ty: 989\n\t};\n\tcanvas.addText(intro, introConfig, introConfigImg);\n\n\tdocument.body.appendChild(canvas.getImg());\n}\n\nasync function img3() {\n\tconst canvas = new canvasImg(750, 1334);\n\tconst qrurl = `http://qrcode.ourwill.cn/png/${btoa('http://live.tuwenzhibo.com')}.png?s=6`;\n\tconst imgs = ['http://cdn.ourwill.cn/static/images/invite3.jpg', 'http://cdn.ourwill.cn/static/images/123.png', qrurl];\n\tconst [bg, avatar, qrcode] = await canvas.loadImgByUrl(imgs, true);\n\tcanvas.setBackground(bg);\n\tconst avatarConfig = {\n\t\tsquare: true\n\t};\n\tconst avatarConfigImg = {\n\t\tw: 134,\n\t\th: 134,\n\t\tcenterx: true,\n\t\ty: 140\n\t};\n\tcanvas.addImg(new ImageCircle(avatar, avatarConfig).getCanvas(), avatarConfigImg);\n\tconst nameConfig = {\n\t\tmaxWidth: 400,\n\t\tfontSize: 32,\n\t\tmaxLines: 1,\n\t\tfontWeight: '400',\n\t\tfillStyle: '#111',\n\t\tfontFamily: 'Calibri'\n\t};\n\tconst nameConfigImg = {\n\t\tcenterx: true,\n\t\ty: 306\n\t};\n\tcanvas.addText('Sucong Hou', nameConfig, nameConfigImg);\n\n\tconst titleConfig = {\n\t\tmaxWidth: 516,\n\t\tfontSize: 32,\n\t\tlineHeight: 1.8,\n\t\tfontWeight: '500',\n\t\tfillStyle: '#111',\n\t\tfontFamily: 'sans-serif',\n\t\tmaxLines: 2,\n\t\tlastLineCenter: true\n\t};\n\tconst titleConfigImg = {\n\t\tx: 116,\n\t\ty: 499\n\t};\n\tcanvas.addText('#遇见生活#生活方式面面观——大咖采访会', titleConfig, titleConfigImg);\n\n\tconst timeConfig = {\n\t\tmaxWidth: 200,\n\t\tfontSize: 26,\n\t\tmaxLines: 1,\n\t\tfontWeight: '300',\n\t\tfillStyle: '#888',\n\t\tfontFamily: 'sans-serif'\n\t};\n\tconst timeConfigImg = {\n\t\tcenterx: true,\n\t\ty: 645\n\t};\n\tcanvas.addText('18/06/26 14:30', timeConfig, timeConfigImg);\n\n\tcanvas.addImg(new ImageClip(qrcode, { padding: 24 }).getCanvas(), {\n\t\tcenterx: true,\n\t\ty: 714,\n\t\tw: 181,\n\t\th: 181\n\t});\n\n\tconst intro =\n\t\t'2018北京国际家具展暨智能生活节于6月14-17日在北京·中国国际展览中心（新馆）盛大召开。《今日家具》中文版直播间将以“生活方式面面观”为主题，邀请多位家具行业大咖，共同探讨有关生活方式的诸多话题。';\n\tconst introConfig = {\n\t\tmaxWidth: 539,\n\t\tfontSize: 26,\n\t\tlineHeight: 2,\n\t\tfontWeight: '300',\n\t\tfillStyle: '#888',\n\t\tfontFamily: 'sans-serif',\n\t\tlastLineCenter: true\n\t};\n\tconst introConfigImg = {\n\t\tcenterx: true,\n\t\ty: 989\n\t};\n\tcanvas.addText(intro, introConfig, introConfigImg);\n\n\tdocument.body.appendChild(canvas.getImg());\n}\n\nimg3();\n"]}